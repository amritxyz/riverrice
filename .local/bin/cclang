#!/bin/sh

i=000
while [ -d "${i}-project" ]; do
	i=$(printf "%03d" $(($i + 1)))
done

n="${i}-project"
s="$n/src"

mkdir -p "$s"

cat > "$s/main.c" << 'EOF'
#include <stdio.h>
#include <stdlib.h>

#include "main.h"

int main(int argc, char **argv)
{
	return 0;
}
EOF

cat > "$s/main.h" << 'EOF'
#ifndef MAIN_H
#define MAIN_H
#endif
EOF

cat > "$n/Makefile" << 'EOF'
CC = cc
CFLAGS = -Wall -Wextra -std=c99
SRC = src/main.c
OUT = main.o

all:
	${CC} ${CFLAGS} ${SRC} -o ${OUT}
run:
	./${OUT}
clean:
	rm -f ${OUT}
EOF

cat > "$n/.gitignore" << 'EOF'
*.o
*.out
*.obj
build/
EOF

echo "Project $n created."
