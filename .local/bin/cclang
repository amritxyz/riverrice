#!/bin/sh

i=000
while [ -d "${i}-project" ]; do
	i=$(printf "%03d" $(($i + 1)))
done

n="${i}-project"
s="$n/src"

mkdir -p "$s"

cat > "$s/main.c" << 'EOF'
#include <stdio.h>
#include <stdlib.h>

#include "main.h"

int main(int argc, char **argv)
{
	return 0;
}
EOF

cat > "$s/main.h" << 'EOF'
#ifndef MAIN_H
#define MAIN_H

#include <stdint.h>

typedef uint8_t   u8;
typedef uint16_t  u16;
typedef uint32_t  u32;
typedef uint64_t  u64;

typedef int8_t    i8;
typedef int16_t   i16;
typedef int32_t   i32;
typedef int64_t   i64;

typedef float     f32;
typedef double    f64;

#endif
EOF

cat > "$n/Makefile" << 'EOF'
CC = cc
CFLAGS = -Wall -Wextra -std=c99
SRC = src/main.c
OUT = main.o

all:
${CC} ${CFLAGS} ${SRC} -o ${OUT}

run:
./${OUT}

clean:
rm -f ${OUT}
EOF

cat > "$n/.gitignore" << 'EOF'
*.o
*.out
*.obj
build/
EOF

echo "Project $n created."
